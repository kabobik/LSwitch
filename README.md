# LSwitch - –ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–∞—Å–∫–ª–∞–¥–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

–ü–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ —è–¥—Ä–∞ (evdev) –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –º–µ–∂–¥—É –∞–Ω–≥–ª–∏–π—Å–∫–æ–π –∏ —Ä—É—Å—Å–∫–æ–π —Ä–∞—Å–∫–ª–∞–¥–∫–∞–º–∏ —á–µ—Ä–µ–∑ –¥–≤–æ–π–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ Shift.

[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![Platform: Linux](https://img.shields.io/badge/platform-Linux-green.svg)](https://www.linux.org/)

---

**–ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
git clone https://github.com/kabobik/lswitch.git && cd lswitch && bash scripts/install.sh
```

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –ø–æ –¥–≤–æ–π–Ω–æ–º—É Shift** ‚Äî –Ω–∞–∂–º–∏ Shift –¥–≤–∞–∂–¥—ã –±—ã—Å—Ç—Ä–æ, –∏ —Ç–µ–∫—Å—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ** ‚Äî X11, Wayland (XWayland), –∫–æ–Ω—Å–æ–ª—å (tty), –≤—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ **–ü–µ—Ä–µ—Ö–≤–∞—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ —è–¥—Ä–∞** ‚Äî —á–µ—Ä–µ–∑ `/dev/input/`, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
- ‚úÖ **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å–ª–æ–≤–∞ –∏–ª–∏ –≤—ã–¥–µ–ª–µ–Ω–∏—è** ‚Äî –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–ª–æ–≤–æ –ò–õ–ò –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Ç–µ–∫—Å—Ç
- ‚úÖ **EN ‚ü∑ RU** ‚Äî –∞–Ω–≥–ª–∏–π—Å–∫–∏–π ‚Üî —Ä—É—Å—Å–∫–∏–π
- ‚úÖ **GUI –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** ‚Äî —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (PyQt5)
- ‚úÖ **systemd –¥–µ–º–æ–Ω** ‚Äî –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ —Å–∏—Å—Ç–µ–º—É
- ‚úÖ **–°–∞–º–æ–æ–±—É—á–∞—é—â–∏–π—Å—è —Å–ª–æ–≤–∞—Ä—å** ‚Äî —É—á–∏—Ç—Å—è –Ω–∞ –∏—Å—Ç–æ—Ä–∏–∏ –æ—à–∏–±–æ–∫
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞** ‚Äî —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|-----------|-----------|-------------|
| Python 3.8+ | –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä | **–ö—Ä–∏—Ç–∏—á–Ω–æ** |
| pip3 | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –ø–∞–∫–µ—Ç–æ–≤ | **–ö—Ä–∏—Ç–∏—á–Ω–æ** |
| python3-dev | –ö–æ–º–ø–∏–ª—è—Ü–∏—è evdev | **–ö—Ä–∏—Ç–∏—á–Ω–æ** |
| xclip | –†–∞–±–æ—Ç–∞ —Å –±—É—Ñ–µ—Ä–æ–º –æ–±–º–µ–Ω–∞ | **–ö—Ä–∏—Ç–∏—á–Ω–æ** |
| xdotool | –≠–º—É–ª—è—Ü–∏—è –∫–ª–∞–≤–∏—à | **–ö—Ä–∏—Ç–∏—á–Ω–æ** |
| PyQt5 | GUI –ø–∞–Ω–µ–ª—å (lswitch-control) | –î–ª—è GUI |
| systemd | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–º–æ–Ω–æ–º | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |

**Display Server:** X11 (–æ—Å–Ω–æ–≤–Ω–æ–π), Wayland (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ XWayland)

### –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
git clone https://github.com/kabobik/lswitch.git
cd lswitch
bash scripts/install.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç Python 3.8+ –∏ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –û–±–Ω–∞—Ä—É–∂–∏—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É (–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–∫–µ—Ç—ã (xclip, xdotool, python3-dev)
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç Python –ø–∞–∫–µ—Ç —Å GUI (PyQt5)
- ‚úÖ –°–∫–æ–ø–∏—Ä—É–µ—Ç systemd unit, udev-–ø—Ä–∞–≤–∏–ª–∞, .desktop —Ñ–∞–π–ª
- ‚úÖ –î–æ–±–∞–≤–∏—Ç –≤–∞—Å –≤ –≥—Ä—É–ø–ø—É `input` (–¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ /dev/input)
- ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–∏—Ç –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –ü–æ—Å–ª–µ **–ø–µ—Ä–≤–æ–π** —É—Å—Ç–∞–Ω–æ–≤–∫–∏ **–ø–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å** (–≤—ã–π—Ç–∏ –∏ –≤–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ) –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –≥—Ä—É–ø–ø–µ input.

> **–ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞:** –°–∫—Ä–∏–ø—Ç –±–µ–∑–æ–ø–∞—Å–µ–Ω –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞. –ü—Ä–∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–µ –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç –¥–µ–º–æ–Ω, –æ–±–Ω–æ–≤–∏—Ç —Ñ–∞–π–ª—ã –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å—ë –Ω–∞ –º–µ—Å—Ç–µ:

```bash
python3 scripts/check_dependencies.py
```

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç:
- ‚úÖ Python –∏ –µ–≥–æ –≤–µ—Ä—Å–∏—é (>= 3.8)
- ‚úÖ Python –ø–∞–∫–µ—Ç—ã (evdev, python-xlib, PyQt5)
- ‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (xclip, xdotool)
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã (lswitch, lswitch-control)
- ‚úÖ –ì—Ä—É–ø–ø—É input
- ‚úÖ Display server (X11/Wayland)

### –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

–ï—Å–ª–∏ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é, —Å–º. [docs/INSTALL.md](docs/INSTALL.md)

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ GUI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
lswitch-control
```

–ò–ª–∏ –Ω–∞–π–¥–∏—Ç–µ –≤ –º–µ–Ω—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π: **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí LSwitch Control**

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ GUI:**
- –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–º–æ–Ω–æ–º (systemd)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å
systemctl --user start lswitch

# –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl --user enable lswitch

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏ –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl --user enable --now lswitch

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl --user status lswitch

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
journalctl --user-unit=lswitch -f
```

**–ò–ª–∏ —á–µ—Ä–µ–∑ Makefile:**
```bash
make enable   # –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ + —Å—Ç–∞—Ä—Ç
make status   # –°—Ç–∞—Ç—É—Å
make logs     # –õ–æ–≥–∏
make stop     # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
```

### –ó–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É—é (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

```bash
# –û–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫
lswitch

# –° –æ—Ç–ª–∞–¥–æ—á–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
lswitch --debug
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü–µ—Ä–µ—Ö–≤–∞—Ç —Å–æ–±—ã—Ç–∏—è:** –ü—Ä–æ–≥—Ä–∞–º–º–∞ —Å–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ "–Ω–∞–∂–∏–º–∞–Ω–∏–µ Shift" —á–µ—Ä–µ–∑ `/dev/input/`
2. **–î–µ—Ç–µ–∫—Ç–æ—Ä –¥–≤–æ–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞:** –ñ–¥—ë—Ç –≤—Ç–æ—Ä–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è Shift –≤ —Ç–µ—á–µ–Ω–∏–µ 0.3 —Å–µ–∫
3. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞:** –ò–∑–≤–ª–µ–∫–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–ª–æ–≤–æ (–∏–ª–∏ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç) –∏–∑ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞
4. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è:** –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ —Å–ª–æ–≤–∞—Ä—å (EN ‚Üî RU)
5. **–í—Å—Ç–∞–≤–∫–∞:** –£–¥–∞–ª—è–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç (Backspace) –∏ –≤—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (Ctrl+V)
6. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞—Å–∫–ª–∞–¥–∫–∏:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Ä–∞—Å–∫–ª–∞–¥–∫—É (Alt+Shift)

## –ü—Ä–∏–º–µ—Ä—ã

| –í–≤–µ–¥–∏ | –î–≤–æ–π–Ω–æ–π Shift | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|------|---|---|
| `ghbdtn` | ‚Üí | `–ø—Ä–∏–≤–µ—Ç` (+ —Ä–∞—Å–∫–ª–∞–¥–∫–∞ –Ω–∞ RU) |
| `–ø—Ä–∏–≤–µ—Ç` | ‚Üí | `ghbdtn` (+ —Ä–∞—Å–∫–ª–∞–¥–∫–∞ –Ω–∞ EN) |
| `ghbdtn vbh` (–≤—ã–¥–µ–ª–µ–Ω–æ) | ‚Üí | `–ø—Ä–∏–≤–µ—Ç –º–∏—Ä` (+ —Ä–∞—Å–∫–ª–∞–¥–∫–∞ –Ω–∞ RU) |
| `–†—É–¥–¥—â —Ü—â–∫–¥–≤` (–≤—ã–¥–µ–ª–µ–Ω–æ) | ‚Üí | `Hello world` (+ —Ä–∞—Å–∫–ª–∞–¥–∫–∞ –Ω–∞ EN) |

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ö–æ–Ω—Ñ–∏–≥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `~/.config/lswitch/config.json` (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ):

```json
{
  "double_shift_timeout": 0.3,
  "switch_layout_after_convert": true,
  "repair_enabled": false,
  "debug": false,
  "layouts": ["en", "ru"],
  "conversion_rules": "en->ru",
  "keyboard_layout_switch_key": "Alt_L+Shift_L"
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `double_shift_timeout` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –º–µ–∂–¥—É –¥–≤—É–º—è –Ω–∞–∂–∞—Ç–∏—è–º–∏ Shift (—Å–µ–∫)
- `switch_layout_after_convert` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —Ä–∞—Å–∫–ª–∞–¥–∫—É –ø–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
- `repair_enabled` ‚Äî –≤–∫–ª—é—á–∏—Ç—å –ø–æ–ø—ã—Ç–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (–æ–±—ã—á–Ω–æ `false`)
- `debug` ‚Äî –≤—ã–≤–æ–¥–∏—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `keyboard_layout_switch_key` ‚Äî –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–∞—Å–∫–ª–∞–¥–∫–∏ (Alt+Shift, Ctrl+Shift, Win+Space)

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:
```bash
systemctl --user restart lswitch
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
lswitch/
‚îú‚îÄ‚îÄ core.py              # –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π
‚îú‚îÄ‚îÄ cli.py               # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ adapters/            # –ê–¥–∞–ø—Ç–µ—Ä—ã –¥–ª—è DE
‚îÇ   ‚îú‚îÄ‚îÄ x11.py          # X11 clipboard/selection
‚îÇ   ‚îú‚îÄ‚îÄ kde.py          # KDE Plasma GUI
‚îÇ   ‚îú‚îÄ‚îÄ cinnamon.py     # Linux Mint Cinnamon GUI
‚îÇ   ‚îî‚îÄ‚îÄ base.py         # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
‚îÇ
‚îú‚îÄ‚îÄ utils/              # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ keyboard.py     # evdev, –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ buffer.py       # –ë—É—Ñ–µ—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–ª–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ desktop.py      # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ DE
‚îÇ
‚îú‚îÄ‚îÄ conversion.py       # –î–≤–∏–∂–æ–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ (EN ‚Üî RU)
‚îú‚îÄ‚îÄ selection.py        # –†–∞–±–æ—Ç–∞ —Å –≤—ã–¥–µ–ª–µ–Ω–∏—è–º–∏
‚îú‚îÄ‚îÄ dictionary.py       # –°–ª–æ–≤–∞—Ä—å —Å–ª–æ–≤
‚îú‚îÄ‚îÄ ngrams.py          # N-–≥—Ä–∞–º–º –∞–Ω–∞–ª–∏–∑ –¥–ª—è –∞–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îî‚îÄ‚îÄ user_dictionary.py # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –ø–æ–∫—Ä—ã—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ç–µ—Å—Ç–∞–º–∏ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
pytest -v

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
pytest tests/test_conversion.py -v

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
pytest --cov=lswitch tests/

# –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã (–±–µ–∑ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö)
pytest -v -m "not slow"
```

**–ò–ª–∏ —á–µ—Ä–µ–∑ Makefile:**
```bash
make test        # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
make test-cov    # –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
```

üìä **–°—Ç–∞—Ç—É—Å:** 48 —Ç–µ—Å—Ç–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π, –≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç ‚úÖ

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [docs/TESTS.md](docs/TESTS.md)

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ü–µ—Ä–≤—ã–π —à–∞–≥ –ø—Ä–∏ –ª—é–±—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö:

```bash
python3 scripts/check_dependencies.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –ø–æ–∫–∞–∂–µ—Ç —á—ë—Ç–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é.

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤ –≥—Ä—É–ø–ø–µ input

**–ü—Ä–æ–±–ª–µ–º–∞:** `PermissionError: [Errno 13] Permission denied: '/dev/input/event0'`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –î–æ–±–∞–≤–∏—Ç—å —Å–µ–±—è –≤ –≥—Ä—É–ø–ø—É input
sudo usermod -a -G input $USER

# –ü–µ—Ä–µ–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
# –ò–∑–º–µ–Ω–µ–Ω–∏—è –≥—Ä—É–ø–ø –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ logout

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
groups | grep input
```

### PyQt5 –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–ü—Ä–æ–±–ª–µ–º–∞:** `lswitch-control` –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# Ubuntu/Debian
sudo apt install python3-pyqt5

# –ò–ª–∏ —á–µ—Ä–µ–∑ pip
sudo pip3 install PyQt5
```

### –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –¥–µ–º–æ–Ω–∞:**
   ```bash
   systemctl --user status lswitch
   ```

2. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:**
   ```bash
   journalctl --user-unit=lswitch -n 50
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏:**
   ```bash
   lswitch --debug
   ```

üîó **–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** [docs/TROUBLESHOOTING.md](docs/TROUBLESHOOTING.md)

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üöÄ [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](docs/QUICKSTART.md) ‚Äî –Ω–∞—á–∞–ª–æ –∑–∞ 5 –º–∏–Ω—É—Ç
- üìñ [–ü–æ–¥—Ä–æ–±–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞](docs/INSTALL.md) ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–µ —à–∞–≥–∏, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–≤
- üèóÔ∏è [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](docs/ARCHITECTURE.md) ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
- üîß [–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞](docs/PERMISSIONS.md) ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ evdev –∏ –≥—Ä—É–ø–ø—ã input
- üêõ [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](docs/TROUBLESHOOTING.md) ‚Äî FAQ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- üìù [–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π](docs/CHANGELOG.md) ‚Äî —á—Ç–æ –Ω–æ–≤–æ–≥–æ
- üìä [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](docs/TESTS.md) ‚Äî –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

**–°–∫—Ä–∏–ø—Ç—ã:**
- `scripts/install.sh` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
- `scripts/check_dependencies.py` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- `scripts/uninstall.sh` ‚Äî –ø–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ —Å–∏—Å—Ç–µ–º—ã

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

```bash
git clone https://github.com/kabobik/lswitch.git
cd lswitch

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–±–∞–∑–æ–≤—ã–µ + GUI + dev)
pip install -e ".[gui,dev]"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
python3 scripts/check_dependencies.py

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
pytest -v

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –æ—Ç–ª–∞–¥–∫–µ
lswitch --debug

# –ò–ª–∏ —á–µ—Ä–µ–∑ make
make test     # –¢–µ—Å—Ç—ã
make lint     # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
make install  # –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
lswitch/
‚îú‚îÄ‚îÄ core.py              # –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π
‚îú‚îÄ‚îÄ cli.py               # CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ adapters/            # –ê–¥–∞–ø—Ç–µ—Ä—ã –¥–ª—è Desktop Environment
‚îÇ   ‚îú‚îÄ‚îÄ x11.py          # X11 clipboard/selection
‚îÇ   ‚îî‚îÄ‚îÄ base.py         # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
‚îú‚îÄ‚îÄ handlers/           # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
‚îú‚îÄ‚îÄ managers/           # –ú–µ–Ω–µ–¥–∂–µ—Ä—ã (–∫–æ–Ω—Ñ–∏–≥, —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
‚îú‚îÄ‚îÄ processors/         # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞
‚îú‚îÄ‚îÄ utils/              # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ conversion.py       # –î–≤–∏–∂–æ–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ EN ‚Üî RU
‚îú‚îÄ‚îÄ dictionary.py       # –°–ª–æ–≤–∞—Ä—å —Å–ª–æ–≤
‚îî‚îÄ‚îÄ user_dictionary.py  # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å

scripts/
‚îú‚îÄ‚îÄ install.sh              # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
‚îú‚îÄ‚îÄ check_dependencies.py   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îî‚îÄ‚îÄ uninstall.sh           # –£–¥–∞–ª–µ–Ω–∏–µ

tests/                  # 48 —Ç–µ—Å—Ç–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π
docs/                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md)

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ä–∞—Å–∫–ª–∞–¥–∫–∏

1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `lswitch/conversion.py` ‚Äî –¥–æ–±–∞–≤—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
2. –û–±–Ω–æ–≤–∏—Ç–µ `lswitch/conversion_maps.py` ‚Äî –¥–æ–±–∞–≤—å—Ç–µ –º–∞–ø–ø–∏–Ω–≥ –∫–ª–∞–≤–∏—à
3. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã –≤ `tests/test_conversion.py`
4. –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
make test

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
make test-cov

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –º–æ–¥—É–ª—å
pytest tests/test_conversion.py -v

# –í —Ä–µ–∂–∏–º–µ watch (–∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫)
ptw --runner "pytest -v"
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî —Å–º. [LICENSE](LICENSE)

## –ê–≤—Ç–æ—Ä

Anton ‚Äî 2024-2026

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- –í–¥–æ—Ö–Ω–æ–≤–ª–µ–Ω–æ [Punto Switcher](https://yandex.ru/support/punto/) –æ—Ç –Ø–Ω–¥–µ–∫—Å–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç [python-evdev](https://python-evdev.readthedocs.io/) –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- PyQt5 –¥–ª—è GUI

---

**‚≠ê –ü–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å? –ü–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É –Ω–∞ GitHub!**
