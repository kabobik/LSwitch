# LSwitch - Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°Ñ‚ÐµÐ»ÑŒ Ñ€Ð°ÑÐºÐ»Ð°Ð´ÐºÐ¸ ÐºÐ»Ð°Ð²Ð¸Ð°Ñ‚ÑƒÑ€Ñ‹

ÐŸÐµÑ€ÐµÑ…Ð²Ð°Ñ‚Ñ‡Ð¸Ðº ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ ÐºÐ»Ð°Ð²Ð¸Ð°Ñ‚ÑƒÑ€Ñ‹ Ð½Ð° ÑƒÑ€Ð¾Ð²Ð½Ðµ ÑÐ´Ñ€Ð° (evdev) Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ‚ÐµÐºÑÑ‚Ð° Ð¼ÐµÐ¶Ð´Ñƒ Ð°Ð½Ð³Ð»Ð¸Ð¹ÑÐºÐ¾Ð¹ Ð¸ Ñ€ÑƒÑÑÐºÐ¾Ð¹ Ñ€Ð°ÑÐºÐ»Ð°Ð´ÐºÐ°Ð¼Ð¸ Ñ‡ÐµÑ€ÐµÐ· Ð´Ð²Ð¾Ð¹Ð½Ð¾Ðµ Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ðµ Shift.

## Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸

- âœ… **ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð°Ñ†Ð¸Ñ Ñ‚ÐµÐºÑÑ‚Ð° Ð¿Ð¾ Ð´Ð²Ð¾Ð¹Ð½Ð¾Ð¼Ñƒ Shift** â€” Ð½Ð°Ð¶Ð¼Ð¸ Shift Ð´Ð²Ð°Ð¶Ð´Ñ‹ Ð±Ñ‹ÑÑ‚Ñ€Ð¾, Ð¸ Ñ‚ÐµÐºÑÑ‚ ÐºÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ÑÑ
- âœ… **Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð²ÐµÐ·Ð´Ðµ** â€” X11, ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ (tty), Ð²ÑÐµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
- âœ… **ÐŸÐµÑ€ÐµÑ…Ð²Ð°Ñ‚ Ð½Ð° ÑƒÑ€Ð¾Ð²Ð½Ðµ ÑÐ´Ñ€Ð°** â€” Ñ‡ÐµÑ€ÐµÐ· `/dev/input/`, Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ
- âœ… **ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð°Ñ†Ð¸Ñ ÑÐ»Ð¾Ð²Ð° Ð¸Ð»Ð¸ Ð²Ñ‹Ð´ÐµÐ»ÐµÐ½Ð¸Ñ** â€” Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐµ ÑÐ»Ð¾Ð²Ð¾ Ð˜Ð›Ð˜ Ð²Ñ‹Ð´ÐµÐ»ÐµÐ½Ð½Ñ‹Ð¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¼ Ñ‚ÐµÐºÑÑ‚
- âœ… **EN âŸ· RU** â€” Ð°Ð½Ð³Ð»Ð¸Ð¹ÑÐºÐ¸Ð¹ â†” Ñ€ÑƒÑÑÐºÐ¸Ð¹
- âœ… **GUI Ð¿Ð°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ** â€” KDE Plasma, Linux Mint Cinnamon
- âœ… **systemd Ð´ÐµÐ¼Ð¾Ð½** â€” Ð°Ð²Ñ‚Ð¾Ð·Ð°Ð¿ÑƒÑÐº Ð¿Ñ€Ð¸ Ð²Ñ…Ð¾Ð´Ðµ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ
- âœ… **Ð¡Ð°Ð¼Ð¾Ð¾Ð±ÑƒÑ‡Ð°ÑŽÑ‰Ð¸Ð¹ÑÑ ÑÐ»Ð¾Ð²Ð°Ñ€ÑŒ** â€” ÑƒÑ‡Ð¸Ñ‚ÑÑ Ð½Ð° Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ð¸ Ð¾ÑˆÐ¸Ð±Ð¾Ðº

## Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°

### Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ

- Linux (Ð»ÑŽÐ±Ð¾Ð¹ Ð´Ð¸ÑÑ‚Ñ€Ð¸Ð±ÑƒÑ‚Ð¸Ð² Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¾Ð¹ evdev)
- Python 3.8+
- pip (Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ð¸Ð´Ñ‘Ñ‚ Ð²Ð¼ÐµÑÑ‚Ðµ Ñ Python)

### Ð¨Ð°Ð³ 1: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸

```bash
# Ubuntu/Debian
sudo apt install python3-pip python3-dev libxclip0 xdotool

# Fedora
sudo dnf install python3-pip python3-devel xclip xdotool

# Arch
sudo pacman -S python3 xclip xdotool
```

### Ð¨Ð°Ð³ 2: ÐšÐ»Ð¾Ð½Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ LSwitch

```bash
git clone https://github.com/kabobik/lswitch.git
cd lswitch

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° (Ð¿Ð¾Ñ‚Ñ€ÐµÐ±ÑƒÑŽÑ‚ÑÑ Ð¿Ñ€Ð°Ð²Ð° root Ð´Ð»Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ðº ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð°Ð¼ Ð²Ð²Ð¾Ð´Ð°)
sudo pip3 install -e .
```

### Ð¨Ð°Ð³ 3: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ð¿Ñ€Ð°Ð²Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° (Ð’ÐÐ–ÐÐž!)

âš ï¸ **ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ** `/dev/input/` Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ root. Ð‘ÐµÐ· Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¿Ñ€Ð°Ð² Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð° Ð±ÑƒÐ´ÐµÑ‚ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ñ‚ÑŒ sudo.

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚ÐµÑÑŒ Ð² Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ `input`:

```bash
# Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð² Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ input
sudo usermod -a -G input $USER

# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ udev Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð¾ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾, Ð´Ð»Ñ Ð½Ð°Ð´Ñ‘Ð¶Ð½Ð¾ÑÑ‚Ð¸)
sudo tee /etc/udev/rules.d/99-lswitch.rules > /dev/null <<'EOF'
KERNEL=="event*", SUBSYSTEM=="input", MODE="0660", GROUP="input"
EOF

sudo udevadm control --reload-rules
sudo udevadm trigger
```

**âš ï¸ Ð’ÐÐ–ÐÐž:** ÐŸÐ¾ÑÐ»Ðµ ÑÑ‚Ð¾Ð³Ð¾ **Ð²Ñ‹Ð¹Ð´Ð¸Ñ‚Ðµ Ð¸ Ð²Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ ÑÐ½Ð¾Ð²Ð°** (Ð¸Ð»Ð¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÐµÑÑŒ) Ð´Ð»Ñ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð°Ð².

ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°:
```bash
groups $USER
# Ð”Ð¾Ð»Ð¶Ð½Ð¾ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ "input"
```

## Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ

### Ð—Ð°Ð¿ÑƒÑÐº GUI (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)

ÐŸÐ¾ÑÐ»Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ:

```bash
lswitch-control
```

Ð˜Ð»Ð¸ Ð½Ð°Ð¹Ð´Ð¸Ñ‚Ðµ Ð² Ð¼ÐµÐ½ÑŽ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹: **ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ â†’ LSwitch Control**

**Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸ GUI:**
- Ð’ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ/Ð²Ñ‹ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ ÑÐµÑ€Ð²Ð¸ÑÐ°
- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð²
- ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð²
- Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ

### Ð—Ð°Ð¿ÑƒÑÐº Ð´ÐµÐ¼Ð¾Ð½Ð° (systemd)

```bash
# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ
sudo systemctl start lswitch

# Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð·Ð°Ð¿ÑƒÑÐº
sudo systemctl enable lswitch

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ
sudo systemctl status lswitch

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð²
sudo journalctl -u lswitch -f
```

### Ð—Ð°Ð¿ÑƒÑÐº Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ (Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸)

```bash
# Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ sudo Ð´Ð»Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ðº /dev/input/
sudo python3 -m lswitch

# Ð˜Ð»Ð¸ Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¾Ð¹
sudo python3 -m lswitch --debug
```

## ÐšÐ°Ðº ÑÑ‚Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚

1. **ÐŸÐµÑ€ÐµÑ…Ð²Ð°Ñ‚ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ:** ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð° ÑÐ»ÑƒÑˆÐ°ÐµÑ‚ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ "Ð½Ð°Ð¶Ð¸Ð¼Ð°Ð½Ð¸Ðµ Shift" Ñ‡ÐµÑ€ÐµÐ· `/dev/input/`
2. **Ð”ÐµÑ‚ÐµÐºÑ‚Ð¾Ñ€ Ð´Ð²Ð¾Ð¹Ð½Ð¾Ð³Ð¾ ÐºÐ»Ð¸ÐºÐ°:** Ð–Ð´Ñ‘Ñ‚ Ð²Ñ‚Ð¾Ñ€Ð¾Ð³Ð¾ Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ñ Shift Ð² Ñ‚ÐµÑ‡ÐµÐ½Ð¸Ðµ 0.3 ÑÐµÐº
3. **ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ñ‚ÐµÐºÑÑ‚Ð°:** Ð˜Ð·Ð²Ð»ÐµÐºÐ°ÐµÑ‚ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐµ ÑÐ»Ð¾Ð²Ð¾ (Ð¸Ð»Ð¸ Ð²Ñ‹Ð´ÐµÐ»ÐµÐ½Ð½Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚) Ð¸Ð· Ð±ÑƒÑ„ÐµÑ€Ð° Ð¾Ð±Ð¼ÐµÐ½Ð°
4. **ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð°Ñ†Ð¸Ñ:** ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·ÑƒÐµÑ‚ Ñ‚ÐµÐºÑÑ‚ Ñ‡ÐµÑ€ÐµÐ· ÑÐ»Ð¾Ð²Ð°Ñ€ÑŒ (EN â†” RU)
5. **Ð’ÑÑ‚Ð°Ð²ÐºÐ°:** Ð£Ð´Ð°Ð»ÑÐµÑ‚ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚ (Backspace) Ð¸ Ð²ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ ÐºÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ (Ctrl+V)
6. **ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ñ€Ð°ÑÐºÐ»Ð°Ð´ÐºÐ¸:** ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ Ñ€Ð°ÑÐºÐ»Ð°Ð´ÐºÑƒ (Alt+Shift)

## ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹

| Ð’Ð²ÐµÐ´Ð¸ | Ð”Ð²Ð¾Ð¹Ð½Ð¾Ð¹ Shift | Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ |
|------|---|---|
| `ghbdtn` | â†’ | `Ð¿Ñ€Ð¸Ð²ÐµÑ‚` (+ Ñ€Ð°ÑÐºÐ»Ð°Ð´ÐºÐ° Ð½Ð° RU) |
| `Ð¿Ñ€Ð¸Ð²ÐµÑ‚` | â†’ | `ghbdtn` (+ Ñ€Ð°ÑÐºÐ»Ð°Ð´ÐºÐ° Ð½Ð° EN) |
| `Hello world` (Ð²Ñ‹Ð´ÐµÐ»ÐµÐ½Ð¾) | â†’ | `ÐŸÑ€Ð¸Ð²ÐµÑ‚ Ð¼Ð¸Ñ€` |

## ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ

ÐšÐ¾Ð½Ñ„Ð¸Ð³ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ð² `~/.config/lswitch/config.json` (Ð¸Ð»Ð¸ `/etc/lswitch/config.json` ÐµÑÐ»Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ ÐºÐ°Ðº systemd ÑÐµÑ€Ð²Ð¸Ñ):

```json
{
  "double_shift_timeout": 0.3,
  "switch_layout_after_convert": true,
  "repair_enabled": false,
  "debug": false,
  "layouts": ["en", "ru"],
  "conversion_rules": "en->ru",
  "keyboard_layout_switch_key": "Alt_L+Shift_L"
}
```

**ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹:**
- `double_shift_timeout` â€” Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð¼ÐµÐ¶Ð´Ñƒ Ð´Ð²ÑƒÐ¼Ñ Ð½Ð°Ð¶Ð°Ñ‚Ð¸ÑÐ¼Ð¸ Shift (ÑÐµÐº)
- `switch_layout_after_convert` â€” Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°Ñ‚ÑŒ Ñ€Ð°ÑÐºÐ»Ð°Ð´ÐºÑƒ Ð¿Ð¾ÑÐ»Ðµ ÐºÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð°Ñ†Ð¸Ð¸
- `repair_enabled` â€” Ð²ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð¿Ñ‹Ñ‚ÐºÐ¸ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ°Ñ… (Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ `false`)
- `debug` â€” Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ð»Ð°Ð´Ð¾Ñ‡Ð½Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ
- `keyboard_layout_switch_key` â€” ÐºÐ¾Ð¼Ð±Ð¸Ð½Ð°Ñ†Ð¸Ñ Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ñ€Ð°ÑÐºÐ»Ð°Ð´ÐºÐ¸ (Alt+Shift, Ctrl+Shift, Win+Space)

ÐŸÐ¾ÑÐ»Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð° Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐµÑ€Ð²Ð¸Ñ:
```bash
sudo systemctl restart lswitch
```

## ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°

```
lswitch/
â”œâ”€â”€ core.py              # ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ñ†Ð¸ÐºÐ» Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹
â”œâ”€â”€ cli.py               # Ð˜Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð½Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸
â”‚
â”œâ”€â”€ adapters/            # ÐÐ´Ð°Ð¿Ñ‚ÐµÑ€Ñ‹ Ð´Ð»Ñ DE
â”‚   â”œâ”€â”€ x11.py          # X11 clipboard/selection
â”‚   â”œâ”€â”€ kde.py          # KDE Plasma GUI
â”‚   â”œâ”€â”€ cinnamon.py     # Linux Mint Cinnamon GUI
â”‚   â””â”€â”€ base.py         # Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ð¹ ÐºÐ»Ð°ÑÑ
â”‚
â”œâ”€â”€ utils/              # Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ñ‹
â”‚   â”œâ”€â”€ keyboard.py     # evdev, Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð°Ñ ÐºÐ»Ð°Ð²Ð¸Ð°Ñ‚ÑƒÑ€Ð°
â”‚   â”œâ”€â”€ buffer.py       # Ð‘ÑƒÑ„ÐµÑ€ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ñ… ÑÐ»Ð¾Ð²
â”‚   â””â”€â”€ desktop.py      # ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ DE
â”‚
â”œâ”€â”€ conversion.py       # Ð”Ð²Ð¸Ð¶Ð¾Ðº ÐºÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð°Ñ†Ð¸Ð¸ (EN â†” RU)
â”œâ”€â”€ selection.py        # Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ð²Ñ‹Ð´ÐµÐ»ÐµÐ½Ð¸ÑÐ¼Ð¸
â”œâ”€â”€ dictionary.py       # Ð¡Ð»Ð¾Ð²Ð°Ñ€ÑŒ ÑÐ»Ð¾Ð²
â”œâ”€â”€ ngrams.py          # N-Ð³Ñ€Ð°Ð¼Ð¼ Ð°Ð½Ð°Ð»Ð¸Ð· Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ
â””â”€â”€ user_dictionary.py # ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ð¹ ÑÐ»Ð¾Ð²Ð°Ñ€ÑŒ
```

ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ: [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md)

## Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

```bash
# Ð—Ð°Ð¿ÑƒÑÐº Ñ‚ÐµÑÑ‚Ð¾Ð²
pytest -v

# Ð—Ð°Ð¿ÑƒÑÐº ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð³Ð¾ Ñ‚ÐµÑÑ‚Ð°
pytest tests/test_conversion.py -v

# Ð¡ Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚Ð¸ÐµÐ¼
pytest --cov=lswitch tests/
```

**Ð¡Ñ‚Ð°Ñ‚ÑƒÑ:** 98 Ñ‚ÐµÑÑ‚Ð¾Ð², Ð²ÑÐµ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´ÑÑ‚ âœ…

## Ð ÐµÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼

**ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð° Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ sudo Ð´Ð°Ð¶Ðµ Ð¿Ð¾ÑÐ»Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸:**
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ, Ñ‡Ñ‚Ð¾ Ð²Ñ‹ Ð² Ð³Ñ€ÑƒÐ¿Ð¿Ðµ `input`: `groups $USER`
- Ð•ÑÐ»Ð¸ Ð½ÐµÑ‚ â€” Ð´Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð¸ Ð¿ÐµÑ€ÐµÐ»Ð¾Ð³Ð¸Ð½ÑŒÑ‚ÐµÑÑŒ: `sudo usermod -a -G input $USER`

**ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð°Ñ†Ð¸Ñ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚:**
- Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ðµ Ð¾Ñ‚Ð»Ð°Ð´ÐºÑƒ: Ð¾Ñ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ config.json, ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ `"debug": true`
- ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ñ‚Ðµ Ð»Ð¾Ð³Ð¸: `sudo journalctl -u lswitch -f`
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ€Ð°ÑÐºÐ»Ð°Ð´ÐºÑƒ: `setxkbmap -query`

**GUI Ð½Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ:**
- Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ PyQt5: `sudo pip3 install PyQt5`
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ DE: `echo $XDG_CURRENT_DESKTOP`

**ÐÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ðº /dev/input/:**
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°
ls -la /dev/input/event* | head -1
# Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ñ Ð³Ñ€ÑƒÐ¿Ð¿Ð¾Ð¹ "input"

# Ð•ÑÐ»Ð¸ Ð½ÐµÑ‚ â€” ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð¾:
sudo tee /etc/udev/rules.d/99-lswitch.rules > /dev/null <<'EOF'
KERNEL=="event*", SUBSYSTEM=="input", MODE="0660", GROUP="input"
EOF
```

ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ: [docs/TROUBLESHOOTING.md](docs/TROUBLESHOOTING.md)

## Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ

- ðŸš€ [Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚](docs/QUICKSTART.md) â€” Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð·Ð° 5 Ð¼Ð¸Ð½ÑƒÑ‚
- ðŸ“– [ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°](docs/INSTALL.md) â€” Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÑˆÐ°Ð³Ð¸
- ðŸ—ï¸ [ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°](docs/ARCHITECTURE.md) â€” Ñ‚ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð¾
- ðŸ’¡ [ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹](docs/EXAMPLES.md) â€” Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ ÑÑ†ÐµÐ½Ð°Ñ€Ð¸Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ
- ðŸ”§ [ÐŸÑ€Ð°Ð²Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°](docs/PERMISSIONS.md) â€” Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° evdev
- ðŸš€ [Ð”ÐµÐ¿Ð»Ð¾Ð¹](docs/DEPLOYMENT.md) â€” Ñ€Ð°Ð·Ð²Ñ‘Ñ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ð°Ñ…
- ðŸ› [Ð ÐµÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼](docs/TROUBLESHOOTING.md) â€” FAQ
- ðŸ“ [Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹](docs/CHANGELOG.md) â€” Ñ‡Ñ‚Ð¾ Ð½Ð¾Ð²Ð¾Ð³Ð¾

## Ð Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°

### Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº

```bash
git clone https://github.com/kabobik/lswitch.git
cd lswitch

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
pip install -e .
pip install pytest pytest-cov

# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ PYTHONPATH
export PYTHONPATH=/path/to/lswitch:$PYTHONPATH

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ñ‚ÐµÑÑ‚Ñ‹
pytest -v

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð² Ð¾Ñ‚Ð»Ð°Ð´ÐºÐµ
sudo PYTHONPATH=. python3 -m lswitch --debug
```

### Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° ÐºÐ¾Ð´Ð°

- `lswitch/core.py` â€” Ð¾ÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ° Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸
- `lswitch/cli.py` â€” CLI Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ
- `adapters/` â€” Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ DE (KDE, Cinnamon)
- `tests/` â€” Ð¼Ð¾Ð´ÑƒÐ»ÑŒÐ½Ñ‹Ðµ Ð¸ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ Ñ‚ÐµÑÑ‚Ñ‹
- `utils/` â€” Ð²ÑÐ¿Ð¾Ð¼Ð¾Ð³Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸

### Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð½Ð¾Ð²Ð¾Ð¹ Ñ€Ð°ÑÐºÐ»Ð°Ð´ÐºÐ¸

ÐžÑ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ `conversion.py` Ð¸ `ngrams.py`, Ð´Ð¾Ð±Ð°Ð²Ð¸Ð² Ð½Ð¾Ð²ÑƒÑŽ Ð¿Ð°Ñ€Ñƒ ÐºÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð°Ñ†Ð¸Ð¸.

## Ð›Ð¸Ñ†ÐµÐ½Ð·Ð¸Ñ

MIT License â€” ÑÐ¼. [LICENSE](LICENSE)

## ÐÐ²Ñ‚Ð¾Ñ€

Anton â€” 2024

## Ð‘Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð½Ð¾ÑÑ‚Ð¸

- Ð’Ð´Ð¾Ñ…Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ [Punto Switcher](https://yandex.ru/support/punto/) Ð¾Ñ‚ Ð¯Ð½Ð´ÐµÐºÑÐ°
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ [python-evdev](https://python-evdev.readthedocs.io/) Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÑ…Ð²Ð°Ñ‚Ð° ÐºÐ»Ð°Ð²Ð¸Ð°Ñ‚ÑƒÑ€Ñ‹
- PyQt5 Ð´Ð»Ñ GUI
