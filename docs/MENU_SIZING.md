# Оптимизация размеров меню

## Что было изменено

Меню была уменьшена на примерно 1/3 от исходного размера после добавления корректной поддержки масштабирования системы.

### История проблемы

1. **На системе с 2K монитором** (2560x1440) отладка проводилась при 96 DPI логическом, но без учета физического масштабирования системы
2. **Результат**: меню казалась мелкой, поэтому её размеры были увеличены
3. **После добавления DPI масштабирования**: теперь приложение корректно определяет и применяет системное масштабирование, поэтому старые размеры стали слишком большими

### Изменённые параметры

#### CustomMenuItem (пункты меню)

| Параметр | Было | Стало | Комментарий |
|----------|------|-------|-----------|
| Минимальная высота | 48px | 32px | Высота каждого пункта меню |
| Горизонтальные отступы | 20px | 14px | Слева и справа от содержимого |
| Вертикальные отступы | 12px | 8px | Сверху и снизу |
| Расстояние между элементами | 18px | 12px | Между иконкой и текстом |
| Размер иконки | 24x24 | 16x16 | Размер пикселей иконки |
| Размер чекбокса | 20x20 | 14x14 | Размер индикатора чекбокса |
| Размер шрифта | 24px | 16px | Размер текста пунктов меню |

#### CustomMenu (сам контейнер меню)

| Параметр | Было | Стало | Комментарий |
|----------|------|-------|-----------|
| Внешние отступы | 6,8,6,8px | 4,5,4,5px | Расстояние от границ меню до содержимого |
| Расстояние между пунктами | 5px | 3px | Вертикальный промежуток между пунктами |

### Математика

Уменьшение на 1/3 означает, что новый размер составляет **2/3** от исходного:
```
Новый размер = Старый размер × 2/3
или
Старый размер ÷ 1.5 ≈ Новый размер

Примеры:
- 48px → 32px (48 × 2/3)
- 24px → 16px (24 × 2/3)
- 20px → 14px (20 × 2/3)
```

## Почему это правильно

1. **Автоматическое масштабирование**: Теперь система корректно определяет масштаб из DPI
2. **Последовательность**: На мониторе 96 DPI и физическом масштабом 0.85x, меню теперь имеет адекватный размер
3. **На 2K мониторах**: При этом же масштабе (96 DPI) меню будет иметь нормальный размер вместо огромного
4. **На HiDPI** (4K, Retina): Меню будет автоматически увеличиваться пропорционально, сохраняя удобство использования

## Если нужна дополнительная регулировка

Если на вашей системе меню всё ещё кажется неправильного размера, используйте:

```bash
# Для явного масштабирования меню (переменная окружения Qt)
export QT_SCALE_FACTOR=1.25
lswitch-control

# Для уменьшения ещё больше (если совсем огромная)
export QT_SCALE_FACTOR=0.8
lswitch-control

# Для увеличения (если всё ещё мелкая)
export QT_SCALE_FACTOR=1.5
lswitch-control
```

## Исходные размеры (для истории)

Если понадобится вернуться к большим размерам, вот исходные значения:

```python
# CustomMenuItem
setMinimumHeight(48)
setContentsMargins(20, 12, 20, 12)
setSpacing(18)
setFixedSize(24, 24)  # иконка
font-size: 24px
checkable size: 20x20

# CustomMenu
setContentsMargins(6, 8, 6, 8)
setSpacing(5)
```

## Файлы, которые были изменены

- `adapters/cinnamon.py`: Класс CustomMenuItem (размеры пунктов меню)
- `adapters/cinnamon.py`: Класс CustomMenu (размеры контейнера)

## Тестирование

Для проверки что размеры адекватны:

```bash
# Запустите приложение
lswitch-control

# Проверьте:
# 1. Все элементы видны и читаемы
# 2. Меню не слишком большая (не закрывает половину экрана)
# 3. Шрифт не слишком мелкий (легко читается)
# 4. Иконки четкие и распознаваемые
# 5. Чекбоксы удобно кликаются мышью
```
