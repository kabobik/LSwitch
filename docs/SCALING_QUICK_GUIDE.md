# Быстрая диагностика масштабирования

## Текущая система

**Ваша конфигурация:**
- Мониторы: 2x FHD (1920x1080 @ 96 DPI)
- Масштаб: 0.85x (физический DPI 81.6 / логический 96)
- Desktop: Cinnamon/GNOME
- Это нормально для 24" мониторов

## Когда масштабирование отличается

Если на другом компьютере интерфейс кажется меньше или больше:

### 1. Проверьте монитор
```bash
xrandr  # Посмотрите на "(normal ...) XXmm x XXmm"
```

| Что видите | Причина |
|-----------|---------|
| 530mm x 300mm @ 1920x1080 | 24" FHD → масштаб ~0.85x |
| 600mm x 340mm @ 1920x1080 | 27" FHD → масштаб ~0.95x |
| 620mm x 350mm @ 2560x1440 | 27" 1440p → масштаб ~1.15x |
| 600mm x 340mm @ 3840x2160 | 27" 4K → масштаб ~1.65x |

### 2. Проверьте DPI системы
```bash
xdpyinfo | grep resolution
# Обычно 96x96, но может быть другим
```

### 3. Проверьте параметры масштабирования
```bash
gsettings get org.gnome.desktop.interface text-scaling-factor
# 1.0 = нет масштабирования
# 1.25, 1.5, 2.0 = масштабирование
```

## Ручная корректировка

Если интерфейс неправильного размера:

```bash
# Слишком мало? Увеличьте:
export QT_SCALE_FACTOR=1.5
lswitch-control

# Слишком много? Уменьшьте:
export QT_SCALE_FACTOR=0.8
lswitch-control

# Попробуйте подобрать значение:
for s in 0.8 0.9 1.0 1.1 1.2 1.5 1.75 2.0; do
    echo "Scale $s:"; export QT_SCALE_FACTOR=$s
    timeout 1 lswitch-control 2>&1 | grep -i final
done
```

## Полная диагностика

```bash
bash scripts/diagnose_scaling.sh
```

Это выведет информацию:
- О мониторах (размеры, разрешение)
- О системе (DPI, параметры DE)
- О рассчитанном масштабе
- Рекомендации для вашей системы

## Для разработчиков

Если масштабирование работает неправильно на какой-то системе:

1. Запустите диагностику и сохраните результат:
   ```bash
   bash scripts/diagnose_scaling.sh > scaling_report.txt
   ```

2. Включите результаты в баг-репорт вместе с:
   - Моделью монитора/ноутбука
   - Операционной системой и DE
   - Описанием проблемы (слишком мало/много)

3. Смотрите полный анализ в `docs/SCALING_ANALYSIS.md`
